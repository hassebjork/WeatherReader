<?xml version="1.0"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="150" height="150" viewBox="0 0 378 378" id="barometer" version="1.1">
	<style type="text/css">
		#barometer text { font-family:Ubuntu;fill:#cccccc;text-anchor:middle;}
		#barometer .dial_dig  { font-size:30px; }
		#barometer .dial_val  { font-size:30px; }
		.dial_bg1   { fill:url(#lg_bg) }
		.dial_bg2   { fill:black;opacity:0.8;fill-opacity:0.7;stroke:black;stroke-width:8 }
		.dial_glar  { fill:url(#lg_glare1);opacity:0.7 }
		.dial_tick  { fill:none;stroke:#b3b3b3;stroke-width:3;stroke-linecap:round }
		#baro_dial  { fill:#ff9900 }
		.baro_doff  { fill:#404040 }
		.baro_don   { fill:#808080 }
		.ico_sun    { fill:#f0c40f }
		.ico_lgh    { fill:#f0c40f }
		.ico_cloud  { fill:#94a4a6 }
		.ico_rain   { fill:#3497db }
	</style>
	<defs>
		<linearGradient id="lg_glare1" x1="10%" y1="10%" x2="60%" y2="100%">
			<stop offset="0" style="stop-color:#ffffff;stop-opacity:0.6"/>
			<stop offset="1" style="stop-opacity:0"/>
		</linearGradient>
		<linearGradient id="lg_bg" x1="50%" y1="133%" x2="50%" y2="-25%">
			<stop offset="0"/>
			<stop style="stop-color:#ffffff" offset="1"/>
		</linearGradient>
	</defs>
	<circle r="188" cy="188" cx="188" class="dial_bg1"/>
	<circle r="175" cx="188" cy="188" class="dial_bg2"/>
	<g class="dial_dig">
		<text x="188" y="42">1010</text>
		<text y="-401" x="-68" transform="matrix(-0.866,0.5,-0.5,-0.866,0,0)">1060</text>
		<text y="-214" x="-255" transform="matrix(-0.866,-0.5,0.5,-0.866,0,0)">960</text>
		<text y="111" x="70" transform="matrix(0.866,-0.5,0.5,0.866,0,0)">1000</text>
		<text transform="matrix(0.5,-0.866,0.866,0.5,0,0)" x="-68" y="111">990</text>
		<text y="42" x="-186" transform="matrix(0,-1,1,0,0,0)">980</text>
		<text transform="matrix(-0.5,-0.866,0.866,-0.5,0,0)" x="-255" y="-77">970</text>
		<text transform="matrix(-0.5,0.866,-0.866,-0.5,0,0)" x="70" y="-401">1050</text>
		<text y="-333" x="188" transform="matrix(0,1,-1,0,0,0)">1040</text>
		<text transform="matrix(0.5,0.866,-0.866,0.5,0,0)" x="257" y="-214">1030</text>
		<text y="-77" x="257" transform="matrix(0.866,0.5,-0.5,0.866,0,0)">1020</text>
	</g>
	<g id="baro_disp" transform="translate(132,280)"/>
	<path class="dial_tick" d="M206,14l-1,5m19,-3l-1,5m19,-1l-2,5m19,1l-2,5m-87,-19l1,5m-19,-2l1,5m-19,-1l2,5m-19,1l2,5m-34,13l3,4m203,278l-3,-4m-241,-34l4,-3m278,-203l-4,3m-310,119l5,-1m342,-37l-5,1m-328,-52l5,2m315,139l-5,-2m-272,-198l4,4m231,255l-4,-4m-243,-8l4,-4m255,-231l-4,4m-296,150l5,-1m336,-72l-5,1m-332,-18l5,2m327,105l-5,-2m-291,-168l4,4m256,229l-4,-4m-243,17l4,-4m229,-256l-4,4m-279,181l5,-2m327,-107l-5,2m-332,17l5,1m337,71l-5,-1m-307,-137l4,3m279,201l-4,-3m-240,43l3,-4m201,-279l-3,4m-259,209l5,-2m314,-141l-5,2m-328,52l5,1m342,35l-5,-1m-256,-168l3,5m173,297l-3,-5m-237,-233l5,3m298,171l-5,-3m-234,67l3,-5m171,-298l-3,5m-235,235l5,-3m297,-173l-5,3m-147,-90v5m-174,170h5m344,-1h-5"/>
	<g>
		<path class="ico_cloud" d="M208,89c10,-5 4,-23 -10,-16c-5,-16 -24,-13 -27,0c-3,12 7,16 7,16Zm-31,5c0,0 -12,-5 -12,-19c0,-18 26,-25 35,-8c18,-3 23,20 9,27Z"/>
		<path class="ico_cloud" d="M119,113c-9,-17 -35,-10 -35,8c0,14 12,19 12,19l1,-5c0,0 -10,-4 -7,-17c3,-12 22,-15 27,0c14,-7 20,12 10,16l1,5c14,-7 9,-31 -9,-27Z"/>
		<path class="ico_rain" d="M118,134c0,0 7,9 0,9c-7,0 0,-9 0,-9Z"/>
		<path class="ico_rain" d="M104,135c0,0 7,9 0,9c-7,0 0,-9 0,-9Z"/>
		<path class="ico_rain" d="M111,145c0,0 7,9 0,9c-7,0 0,-9 0,-9Z"/>
		<path class="ico_cloud" d="M101,214c-9,-17 -35,-10 -35,8c0,14 12,19 12,19l1,-5c0,0 -10,-4 -7,-17c3,-12 22,-15 27,0c14,-7 20,11 10,16l-6,7c26,-3 17,-32 -1,-28Z"/>
		<path class="ico_lgh" d="M89,225h12l-7,11h8l-14,16l2,-12h-8Z"/>
		<path class="ico_cloud" d="M249,153c0,0 -12,-5 -11,-18c1,-18 26,-24 34,-8c17,-3 22,20 8,26Zm30,-5c10,-5 4,-22 -10,-16c-5,-15 -24,-12 -26,-1c-3,12 7,16 7,16Z"/>
		<path class="ico_sun" d="M270,103c0,-3 6,-2 6,0v6c0,3 -6,3 -6,0Zm22,28c-3,0 -2,-6 0,-6h6c3,0 3,6 0,6Zm-4,-14c-2,2 -6,-2 -4,-4l5,-5c2,-2 6,3 4,4Zm-31,0c2,2 6,-2 4,-4l-5,-5c-2,-2 -6,3 -4,4Zm29,22c1,3 1,5 0,7l2,2c2,2 6,-2 4,-4l-5,-5c0,0 -1,-1 -2,-1Zm-20,-16c2,-2 4,-3 6,-3c6,0 9,5 8,10l5,5c4,-8 -1,-20 -13,-20c-5,0 -9,2 -11,5Z"/>
		<path class="ico_sun" d="M262,216c2,2 6,-2 4,-4l-4,-4c-2,-2 -6,2 -4,4Zm32,32c2,2 6,-2 4,-4l-4,-4c-2,-2 -6,2 -4,4Zm0,-32c-2,2 -6,-2 -4,-4l4,-4c2,-2 6,2 4,4Zm-32,32c-2,2 -6,-2 -4,-4l4,-4c2,-2 6,2 4,4Zm35,-17c-3,0 -2,-6 0,-6h6c3,0 2,6 0,6Zm-45,0c-3,0 -2,-6 0,-6h6c3,0 2,6 0,6Zm23,16c0,-3 6,-2 6,0v6c0,3 -6,2 -6,0Zm0,-45c0,-3 6,-2 6,0v6c0,3 -6,2 -6,0Zm3,17c-11,0 -11,18 0,18c11,0 11,-18 0,-18Zm0,-5c19,0 19,28 0,28c-19,0 -19,-28 0,-28Z"/>
	</g>
	<text id="baro_digit" class="dial_val" x="187" y="270"></text>
	<path id="baro_dial" d="M188,185c-4,0 -5,6 0,6c4,0 4,-6 0,-6Zm1,-157l2,150c11,5 10,17 0,21v27l-4,3l-4,-3v-27c-9,-4 -10,-16 0,-21l2,-150c1,-3 2,-2 2,0Z"/>
	<path class="dial_glar" d="M189,19c-92,0 -167,77 -167,171c0,45 18,86 46,117c15,-124 117,-220 241,-220c3,0 6,1 10,1c-31,-41 -77,-68 -130,-68Z"/>
	<script type="text/javascript"><![CDATA[
		var baro_dial  = document.getElementById("baro_dial");
		var baro_digit = document.getElementById("baro_digit");
		var baro_disp  = document.getElementById("baro_disp");
		
		for ( var i = 0; i < 12; i++ ) {
			for ( var j = 0; j < 5; j++ ) {
				var box = document.createElementNS("http://www.w3.org/2000/svg", "rect");
				box.setAttribute("x", ( i * 9 ) );
				box.setAttribute("y", ( j * 7 ) );
				box.setAttribute("width", 6);
				box.setAttribute("height",5);
				box.setAttribute("class","baro_doff")
				baro_disp.appendChild(box);
			}
		}
		// Min 950 to Max 1050
		function barometer_update( data ) {
			var l = data.length - 1;
			baro_dial.setAttribute("transform", "rotate(" + ( ( data[l] - 1010 ) * 3 ) + ", 187, 187)" );
			baro_digit.textContent = data[l] + " hPa";
			
			var y_max = -9999, y_min = 9999, disp = [];
			for ( var i = 0; i < data.length; i++ ) {
				if ( data[i] > y_max ) y_max = data[i];
				if ( data[i] < y_min ) y_min = data[i];
			}
			var dx = data.length / 12;
			var dy = 4 / ( y_max - y_min );
			var t  = 0;
			for ( i = 0; i < data.length; i += dx ) {
				disp[t++] = 4 - Math.floor( ( data[Math.floor(i)] - y_min ) * dy );
			}
			t = 0;
			for ( i = 0; i < 12; i++ ) {
				for ( var j = 0; j < 5; j++) {
					baro_disp.childNodes[t++].setAttribute( "class", disp[i] <= j ? "baro_don" : "baro_doff" );
				}
			}
		}
	]]></script>
</svg>
